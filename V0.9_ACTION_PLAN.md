# ğŸš€ FHEVM v0.9 Action Plan - When Sepolia Support is Confirmed

**Status**: READY TO EXECUTE  
**Trigger**: When `@fhenixprotocol/contracts@0.9.0` appears on npm  
**Expected**: This week (October 18-25, 2025)  

---

## âš¡ QUICK REFERENCE

### Command to Deploy v0.9:
```bash
bash scripts/deploy-v0.9.sh
```

### What It Does:
1. âœ… Updates @fhenixprotocol/contracts to latest (0.9.0)
2. âœ… Compiles smart contract
3. âœ… Deploys FHEDEX to Sepolia
4. âœ… Initializes liquidity pool
5. âœ… Builds frontend
6. âœ… Commits to git
7. âœ… Pushes to GitHub
8. ğŸŠ Ready for Vercel deployment

---

## ğŸ“‹ FULL ACTION PLAN

### Phase 1: Monitor npm Release â³

**Action**: Check daily
```bash
npm view @fhenixprotocol/contracts@latest
```

**Success Indicator**: See version 0.9.0 or higher

**Timeline**: Expected this week

---

### Phase 2: Execute Deployment ğŸš€ (When v0.9 released)

**Option A: Automated (Recommended)**
```bash
bash scripts/deploy-v0.9.sh
```

**Option B: Manual Step-by-Step**

#### Step 1: Update Package
```bash
npm install @fhenixprotocol/contracts@latest
```

#### Step 2: Verify Update
```bash
npm ls @fhenixprotocol/contracts
# Should show: @fhenixprotocol/contracts@0.9.0 (or higher)
```

#### Step 3: Compile
```bash
npx hardhat compile
```

#### Step 4: Deploy to Sepolia
```bash
npx hardhat run scripts/deploy-fhedex-real.js --network sepolia
```

**Success Indicators**:
- âœ… Deployment succeeds (no FHE errors)
- âœ… Contract address returned
- âœ… "Real FHE FHEDEX DEPLOYED" message

#### Step 5: Initialize Liquidity
```bash
npx hardhat run scripts/init-liquidity.js --network sepolia
```

**Success Indicators**:
- âœ… Approval transaction succeeds
- âœ… InitPool transaction succeeds
- âœ… No "insufficient funds" errors
- âœ… Pool reserves encrypted

#### Step 6: Verify on Etherscan
```
https://sepolia.etherscan.io/address/0x881Aa3BE4A1cb54e48533262DDBE36Af272785a5
```

**Check**:
- âœ… Contract verified
- âœ… Latest 2 transactions (approve + initPool)
- âœ… No error messages

#### Step 7: Build Frontend
```bash
npm run build
```

**Success**: Build completes in ~5 seconds

#### Step 8: Commit Changes
```bash
git add -A
git commit -m "feat: upgrade to FHEVM v0.9 with Sepolia FHE support - real liquidity initialized!"
git push
```

---

### Phase 3: Deploy to Vercel ğŸŠ

**Command**:
```bash
vercel deploy --prod
```

**Environment Variables** (Set in Vercel dashboard):
```
VITE_DEX_ADDRESS=0x881Aa3BE4A1cb54e48533262DDBE36Af272785a5
VITE_ZAMA_TOKEN_ADDRESS=0x8CE14A95E9e9622F81b4C71eb99f1C2228bFD636
VITE_NETWORK_ID=11155111
VITE_NETWORK_NAME=sepolia
VITE_RPC_URL=https://sepolia.infura.io/v3/YOUR_KEY
```

**Success**: 
- âœ… Vercel deployment succeeds
- âœ… Live URL generated
- âœ… Frontend loads
- âœ… MetaMask integration works

---

### Phase 4: Test Real FHE Operations ğŸ§ª

**Test 1: Connect Wallet**
```
âœ… MetaMask connects
âœ… Sepolia network shown
âœ… Wallet address displayed
```

**Test 2: Initialize Pool (if not done)**
```
âœ… Enter amounts
âœ… Click "Initialize Pool"
âœ… MetaMask popup
âœ… Transaction confirmed
âœ… Pool created
```

**Test 3: Perform Swap**
```
âœ… Enter swap amount
âœ… Click "Swap ETH"
âœ… MetaMask popup
âœ… Transaction confirmed
âœ… Output calculated correctly
```

**Test 4: Verify on Etherscan**
```
âœ… Transactions visible
âœ… Input data shown
âœ… No amounts visible (encrypted!)
âœ… Real FHE operations confirmed
```

---

### Phase 5: Submit to Builder Track ğŸ†

**Submission Package**:
- âœ… GitHub repo: https://github.com/dharmanan/ZAMA-DEX-FHE
- âœ… Live Vercel URL
- âœ… BUILDER_TRACK_SUBMISSION.md
- âœ… Contract address: 0x881Aa3BE4A1cb54e48533262DDBE36Af272785a5
- âœ… Evidence of real FHE working:
  - Sepolia transaction hashes
  - Screenshots of working DEX
  - Etherscan verification

**Submission Message**:
```
ZAMA DEX - Real FHE Privacy-Preserving Decentralized Exchange

This project demonstrates a production-ready DEX with real homomorphic
encryption using FHEVM v0.9 on Sepolia testnet.

âœ… Real FHE Operations: euint32 encrypted state with add/sub/mul/div
âœ… Complete Privacy: All transaction amounts encrypted on-chain
âœ… Live Deployment: Sepolia testnet with real liquidity
âœ… Production Frontend: React + TypeScript on Vercel
âœ… Comprehensive Docs: 17 documentation files (130+ KB)

GitHub: https://github.com/dharmanan/ZAMA-DEX-FHE
Live: [Vercel URL]
Contract: 0x881Aa3BE4A1cb54e48533262DDBE36Af272785a5

Status: ğŸŸ¢ PRODUCTION READY WITH REAL FHE
Privacy: ğŸ” MAXIMUM (Homomorphic Encryption)
```

---

## âš ï¸ TROUBLESHOOTING

### If Compile Fails:
```bash
# Clear cache and rebuild
rm -rf artifacts cache
npx hardhat compile
```

### If Deploy Fails with Gas Error:
```bash
# Check ETH balance
npx hardhat run -c "
const signer = await ethers.getSigners()[0];
const balance = await ethers.provider.getBalance(signer.address);
console.log('Balance:', ethers.utils.formatEther(balance), 'ETH');
" --network sepolia
```

### If Init Liquidity Fails:
```bash
# Check ZAMA balance
npx hardhat run scripts/init-liquidity.js --network sepolia
# Check error message (usually "insufficient funds" or "FHE not available")
```

### If FHE Still Not Working:
- âŒ v0.9 might not have Sepolia support yet
- âœ… Fallback: Continue with Fhenix whitelist plan
- âœ… Project still ready for Builder Track

---

## ğŸ¯ SUCCESS CRITERIA

**All of these must be true**:
1. âœ… v0.9 released on npm
2. âœ… Deployment script completes successfully
3. âœ… FHEDEX deployed to Sepolia
4. âœ… Liquidity initialized
5. âœ… Swaps work on Vercel
6. âœ… Etherscan shows real FHE operations
7. âœ… Frontend responsive and live

**Result**: ğŸ† **PERFECT Builder Track Submission**

---

## ğŸ“Š TIMELINE

| Phase | Time | Status |
|-------|------|--------|
| Monitor npm | Ongoing | â³ Waiting |
| Deploy v0.9 | ~1-2 hours | ğŸš€ Ready |
| Test on Vercel | ~30 min | ğŸŠ Ready |
| Submit Builder Track | ~15 min | âœ… Ready |
| **TOTAL** | **~2-3 hours** | **ğŸ† Ready** |

---

## ğŸ“ QUICK START

When v0.9 released:

```bash
# 1. One-command deployment
bash scripts/deploy-v0.9.sh

# 2. Deploy to Vercel
vercel deploy --prod

# 3. Test on live URL
# Visit: https://your-vercel-url.com

# 4. Submit to Builder Track!
```

---

## ğŸŠ EXPECTED OUTCOME

**Before v0.9**:
- âŒ Sepolia FHE not working
- â³ Waiting for Fhenix whitelist
- â„¹ï¸ Simulation mode only

**After v0.9 (Scenario: Sepolia Added)**:
- âœ… Real FHE on Sepolia
- âœ… Liquidity pool working
- âœ… Swaps fully functional
- âœ… Live demo for Builder Track
- ğŸ† Perfect submission

---

## ğŸš€ FINAL STATUS

**Ready**: âœ… YES
**Can Execute**: âœ… YES (when v0.9 released)
**Will Work**: âœ… 60-70% confident
**Builder Track Benefit**: ğŸ† MAJOR

---

**Status**: ğŸŸ¢ **READY TO DEPLOY v0.9**  
**Next**: Monitor npm for 0.9.0 release  
**Timeline**: Execute within 2-3 hours when released  

ğŸ¯ **Target**: Submit to Builder Track with REAL FHE working!

