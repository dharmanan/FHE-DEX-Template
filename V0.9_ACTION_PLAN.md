# 🚀 FHEVM v0.9 Action Plan - When Sepolia Support is Confirmed

**Status**: READY TO EXECUTE  
**Trigger**: When `@fhenixprotocol/contracts@0.9.0` appears on npm  
**Expected**: This week (October 18-25, 2025)  

---

## ⚡ QUICK REFERENCE

### Command to Deploy v0.9:
```bash
bash scripts/deploy-v0.9.sh
```

### What It Does:
1. ✅ Updates @fhenixprotocol/contracts to latest (0.9.0)
2. ✅ Compiles smart contract
3. ✅ Deploys FHEDEX to Sepolia
4. ✅ Initializes liquidity pool
5. ✅ Builds frontend
6. ✅ Commits to git
7. ✅ Pushes to GitHub
8. 🎊 Ready for Vercel deployment

---

## 📋 FULL ACTION PLAN

### Phase 1: Monitor npm Release ⏳

**Action**: Check daily
```bash
npm view @fhenixprotocol/contracts@latest
```

**Success Indicator**: See version 0.9.0 or higher

**Timeline**: Expected this week

---

### Phase 2: Execute Deployment 🚀 (When v0.9 released)

**Option A: Automated (Recommended)**
```bash
bash scripts/deploy-v0.9.sh
```

**Option B: Manual Step-by-Step**

#### Step 1: Update Package
```bash
npm install @fhenixprotocol/contracts@latest
```

#### Step 2: Verify Update
```bash
npm ls @fhenixprotocol/contracts
# Should show: @fhenixprotocol/contracts@0.9.0 (or higher)
```

#### Step 3: Compile
```bash
npx hardhat compile
```

#### Step 4: Deploy to Sepolia
```bash
npx hardhat run scripts/deploy-fhedex-real.js --network sepolia
```

**Success Indicators**:
- ✅ Deployment succeeds (no FHE errors)
- ✅ Contract address returned
- ✅ "Real FHE FHEDEX DEPLOYED" message

#### Step 5: Initialize Liquidity
```bash
npx hardhat run scripts/init-liquidity.js --network sepolia
```

**Success Indicators**:
- ✅ Approval transaction succeeds
- ✅ InitPool transaction succeeds
- ✅ No "insufficient funds" errors
- ✅ Pool reserves encrypted

#### Step 6: Verify on Etherscan
```
https://sepolia.etherscan.io/address/0x881Aa3BE4A1cb54e48533262DDBE36Af272785a5
```

**Check**:
- ✅ Contract verified
- ✅ Latest 2 transactions (approve + initPool)
- ✅ No error messages

#### Step 7: Build Frontend
```bash
npm run build
```

**Success**: Build completes in ~5 seconds

#### Step 8: Commit Changes
```bash
git add -A
git commit -m "feat: upgrade to FHEVM v0.9 with Sepolia FHE support - real liquidity initialized!"
git push
```

---

### Phase 3: Deploy to Vercel 🎊

**Command**:
```bash
vercel deploy --prod
```

**Environment Variables** (Set in Vercel dashboard):
```
VITE_DEX_ADDRESS=0x881Aa3BE4A1cb54e48533262DDBE36Af272785a5
VITE_ZAMA_TOKEN_ADDRESS=0x8CE14A95E9e9622F81b4C71eb99f1C2228bFD636
VITE_NETWORK_ID=11155111
VITE_NETWORK_NAME=sepolia
VITE_RPC_URL=https://sepolia.infura.io/v3/YOUR_KEY
```

**Success**: 
- ✅ Vercel deployment succeeds
- ✅ Live URL generated
- ✅ Frontend loads
- ✅ MetaMask integration works

---

### Phase 4: Test Real FHE Operations 🧪

**Test 1: Connect Wallet**
```
✅ MetaMask connects
✅ Sepolia network shown
✅ Wallet address displayed
```

**Test 2: Initialize Pool (if not done)**
```
✅ Enter amounts
✅ Click "Initialize Pool"
✅ MetaMask popup
✅ Transaction confirmed
✅ Pool created
```

**Test 3: Perform Swap**
```
✅ Enter swap amount
✅ Click "Swap ETH"
✅ MetaMask popup
✅ Transaction confirmed
✅ Output calculated correctly
```

**Test 4: Verify on Etherscan**
```
✅ Transactions visible
✅ Input data shown
✅ No amounts visible (encrypted!)
✅ Real FHE operations confirmed
```

---

### Phase 5: Submit to Builder Track 🏆

**Submission Package**:
- ✅ GitHub repo: https://github.com/dharmanan/ZAMA-DEX-FHE
- ✅ Live Vercel URL
- ✅ BUILDER_TRACK_SUBMISSION.md
- ✅ Contract address: 0x881Aa3BE4A1cb54e48533262DDBE36Af272785a5
- ✅ Evidence of real FHE working:
  - Sepolia transaction hashes
  - Screenshots of working DEX
  - Etherscan verification

**Submission Message**:
```
ZAMA DEX - Real FHE Privacy-Preserving Decentralized Exchange

This project demonstrates a production-ready DEX with real homomorphic
encryption using FHEVM v0.9 on Sepolia testnet.

✅ Real FHE Operations: euint32 encrypted state with add/sub/mul/div
✅ Complete Privacy: All transaction amounts encrypted on-chain
✅ Live Deployment: Sepolia testnet with real liquidity
✅ Production Frontend: React + TypeScript on Vercel
✅ Comprehensive Docs: 17 documentation files (130+ KB)

GitHub: https://github.com/dharmanan/ZAMA-DEX-FHE
Live: [Vercel URL]
Contract: 0x881Aa3BE4A1cb54e48533262DDBE36Af272785a5

Status: 🟢 PRODUCTION READY WITH REAL FHE
Privacy: 🔐 MAXIMUM (Homomorphic Encryption)
```

---

## ⚠️ TROUBLESHOOTING

### If Compile Fails:
```bash
# Clear cache and rebuild
rm -rf artifacts cache
npx hardhat compile
```

### If Deploy Fails with Gas Error:
```bash
# Check ETH balance
npx hardhat run -c "
const signer = await ethers.getSigners()[0];
const balance = await ethers.provider.getBalance(signer.address);
console.log('Balance:', ethers.utils.formatEther(balance), 'ETH');
" --network sepolia
```

### If Init Liquidity Fails:
```bash
# Check ZAMA balance
npx hardhat run scripts/init-liquidity.js --network sepolia
# Check error message (usually "insufficient funds" or "FHE not available")
```

### If FHE Still Not Working:
- ❌ v0.9 might not have Sepolia support yet
- ✅ Fallback: Continue with Fhenix whitelist plan
- ✅ Project still ready for Builder Track

---

## 🎯 SUCCESS CRITERIA

**All of these must be true**:
1. ✅ v0.9 released on npm
2. ✅ Deployment script completes successfully
3. ✅ FHEDEX deployed to Sepolia
4. ✅ Liquidity initialized
5. ✅ Swaps work on Vercel
6. ✅ Etherscan shows real FHE operations
7. ✅ Frontend responsive and live

**Result**: 🏆 **PERFECT Builder Track Submission**

---

## 📊 TIMELINE

| Phase | Time | Status |
|-------|------|--------|
| Monitor npm | Ongoing | ⏳ Waiting |
| Deploy v0.9 | ~1-2 hours | 🚀 Ready |
| Test on Vercel | ~30 min | 🎊 Ready |
| Submit Builder Track | ~15 min | ✅ Ready |
| **TOTAL** | **~2-3 hours** | **🏆 Ready** |

---

## 📞 QUICK START

When v0.9 released:

```bash
# 1. One-command deployment
bash scripts/deploy-v0.9.sh

# 2. Deploy to Vercel
vercel deploy --prod

# 3. Test on live URL
# Visit: https://your-vercel-url.com

# 4. Submit to Builder Track!
```

---

## 🎊 EXPECTED OUTCOME

**Before v0.9**:
- ❌ Sepolia FHE not working
- ⏳ Waiting for Fhenix whitelist
- ℹ️ Simulation mode only

**After v0.9 (Scenario: Sepolia Added)**:
- ✅ Real FHE on Sepolia
- ✅ Liquidity pool working
- ✅ Swaps fully functional
- ✅ Live demo for Builder Track
- 🏆 Perfect submission

---

## 🚀 FINAL STATUS

**Ready**: ✅ YES
**Can Execute**: ✅ YES (when v0.9 released)
**Will Work**: ✅ 60-70% confident
**Builder Track Benefit**: 🏆 MAJOR

---

**Status**: 🟢 **READY TO DEPLOY v0.9**  
**Next**: Monitor npm for 0.9.0 release  
**Timeline**: Execute within 2-3 hours when released  

🎯 **Target**: Submit to Builder Track with REAL FHE working!

